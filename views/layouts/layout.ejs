<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EJS Layout Solution</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 900px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        header {
            background: #5c6bc0;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 20px;
        }
        
        .code-container {
            background: #2d3436;
            color: #dfe6e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .output {
            background: #f8f9fa;
            border-left: 4px solid #5c6bc0;
            padding: 20px;
            margin: 20px 0;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .tab {
            background: #5c6bc0;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .tab:hover {
            background: #4a56a0;
        }
        
        .tab.active {
            background: #3f4d8f;
        }
        
        footer {
            text-align: center;
            margin-top: 20px;
            color: white;
            font-size: 0.9rem;
        }
        
        .note {
            background: #fff8e1;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        
        .solution {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #4caf50;
        }
        
        .error {
            background: #ffebee;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #f44336;
        }
        
        .file-structure {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>EJS Layout Issue Solution</h1>
            <p>Fixing the &lt;%- body %&gt; not working problem</p>
        </header>
        
        <div class="content">
            <h2>The Problem</h2>
            <div class="error">
                <p>The <code>&lt;%- body %&gt;</code> tag in your layout.ejs file is not rendering content from your other EJS files.</p>
            </div>
            
            <h2>Why This Happens</h2>
            <p>In newer versions of Express and EJS, you need to explicitly set up layout support. Earlier versions may have had different defaults.</p>
            
            <h2>Solution: Proper Setup</h2>
            <div class="solution">
                <p>You need to install and configure <code>express-ejs-layouts</code> for the <code>&lt;%- body %&gt;</code> tag to work.</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showTab('server')">Server Setup</button>
                <button class="tab" onclick="showTab('layout')">layout.ejs</button>
                <button class="tab" onclick="showTab('index')">index.ejs</button>
                <button class="tab" onclick="showTab('structure')">File Structure</button>
            </div>
            
            <div id="server-tab" class="tab-content">
                <h3>Server.js Configuration</h3>
                <div class="code-container">
const express = require('express');
const expressLayouts = require('express-ejs-layouts'); // Need to install this

const app = express();
const port = 3000;

// Set EJS as the view engine
app.set('view engine', 'ejs');

// Use express-ejs-layouts middleware
app.use(expressLayouts);
app.set('layout', 'layout'); // Specify the default layout

// Set the directory for your views
app.set('views', __dirname + '/views');

// Route to render index.ejs within layout.ejs
app.get('/', (req, res) => {
    res.render('index', { 
        title: 'Home Page',
        message: 'This content is passed to the EJS template'
    });
});

app.listen(port, () => {
    console.log(`Server running on port ${port}`);
});
                </div>
                <div class="note">
                    <p>Make sure to install the required package: <code>npm install express ejs express-ejs-layouts</code></p>
                </div>
            </div>
            
            <div id="layout-tab" class="tab-content" style="display: none;">
                <h3>layout.ejs File</h3>
                <div class="code-container">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Myproject&lt;/title&gt;
    &lt;!-- Your CSS and meta tags here --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;h1&gt;Website Header&lt;/h1&gt;
        &lt;nav&gt;
            &lt;a href="/"&gt;Home&lt;/a&gt;
            &lt;a href="/about"&gt;About&lt;/a&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
    
    &lt;main&gt;
        Before content
        &lt;br&gt;
        &lt;%- body %&gt;
        &lt;br&gt;
        After content
    &lt;/main&gt;
    
    &lt;footer&gt;
        &lt;p&gt;&copy; 2023 My Project&lt;/p&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
                </div>
            </div>
            
            <div id="index-tab" class="tab-content" style="display: none;">
                <h3>index.ejs File</h3>
                <div class="code-container">
&lt;!-- This file doesn't need full HTML structure --&gt;
&lt;h2&gt;&lt;%= title %&gt;&lt;/h2&gt;
&lt;p&gt;&lt;%= message %&gt;&lt;/p&gt;

&lt;div class="content"&gt;
    &lt;p&gt;This is the index page content that gets injected into the layout.&lt;/p&gt;
    &lt;p&gt;Current date: &lt;%= new Date().toDateString() %&gt;&lt;/p&gt;
&lt;/div&gt;
                </div>
            </div>
            
            <div id="structure-tab" class="tab-content" style="display: none;">
                <h3>Project File Structure</h3>
                <div class="file-structure">
project-root/
├── node_modules/
├── views/
│   ├── layout.ejs
│   ├── index.ejs
│   └── about.ejs
├── package.json
└── server.js
                </div>
            </div>
            
            <h2>Expected Output</h2>
            <div class="output">
                <header style="background: #f0f0f0; padding: 15px; margin-bottom: 20px;">
                    <h1 style="margin: 0; color: #5c6bc0;">Website Header</h1>
                    <nav style="margin-top: 10px;">
                        <a href="/" style="margin-right: 15px; text-decoration: none; color: #333;">Home</a>
                        <a href="/about" style="text-decoration: none; color: #333;">About</a>
                    </nav>
                </header>
                
                <main>
                    Before content
                    <br>
                    <h2>Home Page</h2>
                    <p>This content is passed to the EJS template</p>
                    <div class="content">
                        <p>This is the index page content that gets injected into the layout.</p>
                        <p>Current date: <span id="current-date"></span></p>
                    </div>
                    <br>
                    After content
                </main>
                
                <footer style="margin-top: 30px; padding: 15px; background: #f0f0f0; text-align: center;">
                    <p style="margin: 0;">© 2023 My Project</p>
                </footer>
            </div>
            
            <div class="note">
                <p><strong>Key Points:</strong></p>
                <ul>
                    <li>Install <code>express-ejs-layouts</code> package</li>
                    <li>Configure it in your server.js file</li>
                    <li>Your individual EJS files should not contain full HTML structure</li>
                    <li>All common HTML goes in layout.ejs</li>
                </ul>
            </div>
        </div>
    </div>
    
    <footer>
        <p>EJS Layout Solution | Fix for &lt;%- body %&gt; not working</p>
    </footer>

    <script>
        // Show current date in output
        document.getElementById('current-date').textContent = new Date().toDateString();
        
        // Tab functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Update active tab button
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>